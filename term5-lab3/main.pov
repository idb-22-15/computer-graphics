// Настройки камеры
camera {
  location <8, 3, -10>   // Позиция камеры
  look_at <0, 1, 0>      // Точка, на которую направлена камера
}

// Освещение сцены
light_source {
  <0, 10, -10>           // Позиция источника света
  color rgb <1, 1, 1>    // Цвет света (белый)
}

// Текстура рыбы
#declare Fish_Texture = texture {
  pigment { color rgb <0.3, 0.7, 1> }  // Синеватый цвет тела рыбы
  finish {
    reflection 0.2   // Небольшое отражение
    specular 0.8     // Глянец
    ambient 0.2      // Окружающий свет
  }
}

// Модель рыбы с использованием изоповерхности (тело в форме капли и голова в форме шара)
isosurface {
  function {
    // Формула для тела рыбы в форме капли (обратный эллипсоид)
    pow(x, 2)/1.5 + pow(y, 2)/1 + pow(z/3 + 1, 2) - 1
    // Сужение в области хвоста
    - 0.3 * exp(-3 * pow(z - 2, 2))
  }
  max_gradient 5
  contained_by { box { <-2, -1.5, -4>, <2, 2, 4> } } // Ограничение области
  texture { Fish_Texture }
}

// Добавление головы в форме сферы
sphere {
  <0, 0, -4>, 1  // Центр головы и радиус
  texture { Fish_Texture }
}

// Глаза рыбы
sphere {
  <0.6, 0.4, -4.7>, 0.1  // Позиция правого глаза
  texture {
    pigment { color rgb <0, 0, 0> }  // Черные глаза
  }
}

sphere {
  <-0.6, 0.4, -4.7>, 0.1  // Позиция левого глаза
  texture {
    pigment { color rgb <0, 0, 0> }
  }
}

// Плавники с использованием цилиндров
cylinder {
  <0.7, 0, 0>, <1.5, 0.5, 1>, 0.05  // Правый плавник
  texture { Fish_Texture }
}

cylinder {
  <-0.7, 0, 0>, <-1.5, 0.5, 1>, 0.05  // Левый плавник
  texture { Fish_Texture }
}

// Верхний плавник
cone {
  <0, 0.2, -0.5>, 0.1,    // Основание плавника
  <0, 1.5, 1.5>, 0.5    // Вершина плавника
  texture { Fish_Texture }
}

// Плоскость воды
plane {
  y, -2
  texture {
    pigment { color rgb <0.2, 0.4, 1> }  // Цвет воды
    finish {
      reflection 0.5    // Отражение воды
    }
  }
}
